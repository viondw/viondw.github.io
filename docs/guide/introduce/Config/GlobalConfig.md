> [!IMPORTANT]
> *   **全局配置**修改后必须重启项目才能生效，无特殊需求不建议进行修改。
> *   该文档编写在版本`v0.4.90`中，较早版本可能会存在配置项不对应情况。



## 下载插件(downloader)   

### streamlink(hls多线程下载）   

* 一些直播平台特殊分区会采用`hls`流，例如哔哩哔哩的`APEX`分区，在选择该下载器后，下载器会自动识别是否需要启用hls。
* 不支持的流将回退到`ffmpeg`。需安装`FFmpeg`。   

### ffmpeg   

* 最常见的音视频下载工具，兼容性较强。   

### stream-gears   

* 默认下载器，无需安装`ffmpeg`即可使用，并且可防止主播`PK`等导致分辨率变化造成视频`花屏`的情况。  

> [!TIP]
> 这里指的处理方法通俗的解释为**分段处理**，如果视频莫名其妙的分段了，请检查是否存在`PK/主播网络/本地网络`问题。   


### ⚠sync-downloader(边录边传）   

* 采用流式视频上传技术，直播录制过程中实时上传，直播一结束即可自动投稿并送审。速度领先市面**所有**录播投稿工具。
* 极低资源占用：最低仅需`1核CPU+0.5G`内存，`无需硬盘`支持，即可稳定同时录制**10**个直播间，实现数据**0**落盘。   
* 本功能强依赖稳定的上传带宽，建议确保`上传速率`≥`下载速率`，否则在高并发录制场景中可能出现`内存溢出(OOM)`风险。
* **稳定性**也与主播推流端质量密切相关，如遇推流异常、断流等情况，可能导致投稿后的视频在`转码`环节出现异常（概率较低）。   

> [!TIP]
> 并不是所有的直播流都能使用该功能，其他平台的自行测试，开发者也会持续进行平台适配。   

## 视频分段大小（file_size）

* 字面意思，该配置项使用的单位为`Byte`，例如:**4294967296**约等于4G大小。   

## 视频分段时长（segment_time）

* 字面意思，可以根据视频时长来进行分段处理，请遵循时间格式要求，格式：**00:00:00（时:分:秒）**

> [!TIP]
> 分段大小与分段时长可同时填写，先到哪个值就用哪个。 

## 文件名模板（filename_prefix）   

* 默认为`{streamer}%Y-%m-%dT%H_%M_%S`，无特殊需求默认即可。   
* 以上的模板内容显示例：`主播名2025-03-25T12_46_42`      

> [!TIP]
> 如果你执意要改文件模板，那么必须加入`{streamer}`这个变量名且在`第一位`      
> 必须存在`%Y-%m-%d %H_%M_%S`:对应 年-月-日 时_分_秒,**禁止去掉**`时分秒`单位       
> 提供`{title}`变量，对应主播的直播标题，请控制字符数不要超过哔哩哔哩的`限制`    


## 视频分段后处理并行（segment_processor_parallel)   

* 这个功能你大概是用不到的，所以请不要尝试开启，不做解释。   

## 碎片过滤（filtering_threshold）

* 用于过滤掉因网络/主播问题导致的视频碎片，默认20，单位为M。      

## 下播延迟检测（delay)   

* 当检测到主播下播后，延迟一定时间再次检测确认，避免特殊情况提早启动上传导致分稿件。


> [!TIP]
> 这个简单的理解就是，一些主播可能会一天多次开播直播，如果你不希望投稿为多个导致动态刷屏，那么就根据主播的`下播开播`之间的`间隔时间`来添加。
> 默认延迟时间为`0`，单位：`秒`


## 直播事件检测间隔（event_loop_interval）


* 单个主播检测间隔时间，单位：`秒`。比如虎牙有10个主播，每个主播会间隔10秒检测。   


## 下载线程池大小（pool1_size）

* 负责下载事件的线程池大小，用于限制最大同时录制数，默认为`5`。   

> [!TIP]
> 如果你添加了6个主播，但只设置了5个，那么就会有一个不会进行录制。   

-------

## 全局上传设置  

* 该设置项保持默认即可，非必要无需进行修改,请不要大作聪明。   

 






